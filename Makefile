# ------------------------------------------------------------------------------
# file: Makefile
# type: GNU makefile
# project: awkmake
# ------------------------------------------------------------------------------

# ------------------------------------------------------------------------------
# variables
# ------------------------------------------------------------------------------

build_tacl := ./build.tacl
variables_mk := ./variables.mk

targets :=
targets += \
  $(variables_mk)

scripts_dir := ./scripts
printVariables_awk := $(scripts_dir)/printVariables.awk


RM := rm -fR


# ------------------------------------------------------------------------------
# rules
# ------------------------------------------------------------------------------

# --------------------------------------
# all
# --------------------------------------
all: $(variables_mk)

# --------------------------------------
# .ONESHELL
# --------------------------------------
.ONESHELL:

# --------------------------------------
# .PHONY
# --------------------------------------
.PHONY: .ONESHELL all clean

# --------------------------------------
# variables_mk
# --------------------------------------
$(variables_mk): $(build_tacl) $(printVariables_awk)
	@echo "Building $@"
	@$(printVariables_awk) < $(build_tacl) > "$@"

# --------------------------------------
# 
# --------------------------------------


# --------------------------------------
# clean
# --------------------------------------
clean:
	@echo "Deleting all targets and intermediate files"
	-@$(RM) $(targets)

# ------------------------------------------------------------------------------
# EOF
# ------------------------------------------------------------------------------
